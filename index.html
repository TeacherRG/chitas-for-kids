create_file
path: /home/claude/chitas-app.html
description: Creating the complete Chitas for Kids application with JSON data support
file_text: <!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>◊ë◊¥◊î | –•–∏—Ç–∞—Å –¥–ª—è –¥–µ—Ç–µ–π</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        :root {
            --color-chumash: #FF6B6B;
            --color-tehillim: #4ECDC4;
            --color-tanya: #45B7D1;
            --color-rambam: #96CEB4;
            --color-hayom: #FFEAA7;
            --color-idea: #DFE6E9;
            --color-primary: #667eea;
            --color-secondary: #764ba2;
            --color-success: #4CAF50;
            --color-error: #f44336;
            --color-text-dark: #333333;
            --color-text-light: #666666;
            --shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
            min-height: 100vh;
            padding-bottom: 80px;
            overflow-x: hidden;
        }

        /* Header */
        .app-header {
            background: linear-gradient(135deg, #FFA500, #FF6B6B);
            color: white;
            padding: 20px;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow);
        }

        .app-header h1 {
            font-size: 24px;
            margin-bottom: 5px;
        }

        .app-header p {
            font-size: 14px;
            opacity: 0.9;
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Card Base */
        .card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
        }

        /* Date Card */
        .date-card h2 {
            color: var(--color-text-dark);
            font-size: 22px;
            margin-bottom: 10px;
        }

        .dedication {
            color: var(--color-text-light);
            font-size: 14px;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .date-navigation {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .btn {
            background: var(--color-primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: transform 0.2s, opacity 0.2s;
            font-weight: 500;
        }

        .btn:hover {
            transform: scale(1.05);
        }

        .btn:active {
            transform: scale(0.95);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Progress Card */
        .progress-stats {
            display: flex;
            justify-content: space-around;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .progress-stat {
            text-align: center;
            flex: 1;
            min-width: 80px;
        }

        .progress-stat .value {
            font-size: 28px;
            font-weight: bold;
            color: var(--color-primary);
        }

        .progress-stat .label {
            font-size: 12px;
            color: var(--color-text-light);
            margin-top: 5px;
        }

        .progress-bar-container {
            background: #f0f0f0;
            border-radius: 10px;
            height: 20px;
            overflow: hidden;
        }

        .progress-bar {
            background: linear-gradient(90deg, var(--color-primary), var(--color-success));
            height: 100%;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            font-weight: bold;
        }

        /* Tiles Grid */
        .tiles-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .tile {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: var(--shadow);
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            position: relative;
            overflow: hidden;
        }

        .tile:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .tile:active {
            transform: translateY(-2px);
        }

        .tile-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            padding-left: 10px;
            border-left: 4px solid currentColor;
        }

        .tile-icon {
            font-size: 32px;
        }

        .tile-title-group {
            flex: 1;
        }

        .tile-title {
            font-size: 18px;
            font-weight: bold;
            color: var(--color-text-dark);
        }

        .tile-subtitle {
            font-size: 14px;
            color: var(--color-text-light);
            margin-top: 3px;
        }

        .tile-preview {
            font-size: 14px;
            color: var(--color-text-light);
            line-height: 1.6;
            margin: 15px 0;
            max-height: 80px;
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
        }

        .tile-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 15px;
            border-top: 1px solid #f0f0f0;
        }

        .tile-points {
            font-weight: bold;
            color: var(--color-primary);
            font-size: 16px;
        }

        .tile-status {
            padding: 5px 12px;
            border-radius: 5px;
            font-size: 12px;
            font-weight: 500;
        }

        .tile-status.completed {
            background: #e8f5e9;
            color: var(--color-success);
        }

        .tile-status.pending {
            background: #fff3e0;
            color: #f57c00;
        }

        /* Section View */
        .section-view {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: white;
            z-index: 200;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }

        .section-view.active {
            display: block;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }

        .section-header {
            background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 10;
            box-shadow: var(--shadow);
        }

        .section-header .btn {
            background: rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
        }

        .section-header h2 {
            font-size: 20px;
            text-align: center;
            flex: 1;
            margin: 0 10px;
        }

        .section-content {
            padding: 30px 20px;
            max-width: 800px;
            margin: 0 auto;
        }

        .content-title {
            color: var(--color-text-dark);
            margin-bottom: 20px;
            font-size: 24px;
            font-weight: bold;
        }

        .content-paragraph {
            color: var(--color-text-dark);
            line-height: 1.8;
            margin-bottom: 20px;
            font-size: 16px;
        }

        .content-paragraph.highlight {
            background: linear-gradient(120deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid var(--color-primary);
            font-weight: 500;
        }

        .content-paragraph.teaching {
            background: linear-gradient(120deg, #e3f2fd 0%, #bbdefb 100%);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid var(--color-tanya);
        }

        .content-paragraph.quote {
            font-style: italic;
            border-left: 4px solid var(--color-hayom);
            padding-left: 15px;
            color: var(--color-text-light);
        }

        .content-paragraph.example,
        .content-paragraph.explanation,
        .content-paragraph.note {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            font-size: 15px;
        }

        .paragraph-title {
            font-weight: bold;
            color: var(--color-primary);
            margin-bottom: 8px;
        }

        /* Game Container */
        .game-container {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 15px;
            padding: 30px 20px;
            margin-top: 30px;
        }

        .game-menu {
            text-align: center;
        }

        .game-menu h3 {
            color: var(--color-text-dark);
            margin-bottom: 20px;
            font-size: 22px;
        }

        .game-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .game-button {
            background: white;
            border: 2px solid var(--color-primary);
            color: var(--color-primary);
            padding: 15px 25px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            transition: all 0.3s;
            min-width: 120px;
        }

        .game-button:hover {
            background: var(--color-primary);
            color: white;
            transform: scale(1.05);
        }

        /* Quiz Game */
        .quiz-game {
            display: none;
        }

        .quiz-game.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .quiz-question {
            font-size: 20px;
            color: var(--color-text-dark);
            margin-bottom: 25px;
            text-align: center;
            font-weight: 500;
            line-height: 1.5;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .quiz-option {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 16px;
            text-align: left;
            position: relative;
        }

        .quiz-option:hover:not(.disabled) {
            border-color: var(--color-primary);
            transform: translateX(5px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .quiz-option.correct {
            background: #e8f5e9;
            border-color: var(--color-success);
            animation: pulse 0.5s;
        }

        .quiz-option.incorrect {
            background: #ffebee;
            border-color: var(--color-error);
            animation: shake 0.5s;
        }

        .quiz-option.disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .quiz-feedback {
            margin-top: 20px;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            font-size: 16px;
            line-height: 1.6;
            display: none;
        }

        .quiz-feedback.show {
            display: block;
            animation: fadeIn 0.3s;
        }

        .quiz-feedback.success {
            background: #e8f5e9;
            color: var(--color-success);
        }

        .quiz-feedback.error {
            background: #ffebee;
            color: var(--color-error);
        }

        .feedback-title {
            font-size: 24px;
            margin-bottom: 10px;
        }

        /* True/False Game */
        .truefalse-game {
            display: none;
        }

        .truefalse-game.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        .truefalse-questions {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .truefalse-item {
            background: white;
            border-radius: 10px;
            padding: 20px;
        }

        .truefalse-statement {
            font-size: 16px;
            margin-bottom: 15px;
            color: var(--color-text-dark);
            line-height: 1.6;
            font-weight: 500;
        }

        .truefalse-buttons {
            display: flex;
            gap: 10px;
        }

        .truefalse-button {
            flex: 1;
            padding: 12px;
            border: 2px solid #e0e0e0;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 16px;
            font-weight: 500;
        }

        .truefalse-button:hover:not(.disabled) {
            border-color: var(--color-primary);
            transform: scale(1.05);
        }

        .truefalse-button.correct {
            background: #e8f5e9;
            border-color: var(--color-success);
        }

        .truefalse-button.incorrect {
            background: #ffebee;
            border-color: var(--color-error);
        }

        .truefalse-button.disabled {
            cursor: not-allowed;
            opacity: 0.6;
        }

        .truefalse-explanation {
            margin-top: 10px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 5px;
            font-size: 14px;
            color: var(--color-text-light);
            display: none;
        }

        .truefalse-explanation.show {
            display: block;
            animation: fadeIn 0.3s;
        }

        /* Match Game */
        .match-game {
            display: none;
        }

        .match-game.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        .match-instruction {
            text-align: center;
            color: var(--color-text-dark);
            margin-bottom: 20px;
            font-size: 16px;
        }

        .match-pairs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .match-column {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .match-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #e0e0e0;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            font-size: 15px;
        }

        .match-item:hover:not(.matched):not(.disabled) {
            border-color: var(--color-primary);
            transform: scale(1.05);
        }

        .match-item.selected {
            background: var(--color-primary);
            color: white;
            border-color: var(--color-primary);
        }

        .match-item.matched {
            background: #e8f5e9;
            border-color: var(--color-success);
            cursor: default;
            animation: pulse 0.5s;
        }

        .match-item.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Reflection Game */
        .reflection-game {
            display: none;
        }

        .reflection-game.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        .reflection-question {
            font-size: 18px;
            color: var(--color-text-dark);
            margin-bottom: 20px;
            text-align: center;
            font-weight: 500;
        }

        .reflection-textarea {
            width: 100%;
            min-height: 150px;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            font-family: inherit;
            resize: vertical;
            transition: border-color 0.3s;
        }

        .reflection-textarea:focus {
            outline: none;
            border-color: var(--color-primary);
        }

        .reflection-save {
            margin-top: 15px;
            width: 100%;
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-around;
            padding: 10px 0 max(10px, env(safe-area-inset-bottom));
            z-index: 100;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            cursor: pointer;
            padding: 5px 15px;
            border-radius: 8px;
            transition: all 0.3s;
            color: var(--color-text-light);
        }

        .nav-item:hover {
            background: #f0f0f0;
        }

        .nav-item.active {
            color: var(--color-primary);
        }

        .nav-icon {
            font-size: 24px;
        }

        .nav-label {
            font-size: 12px;
            font-weight: 500;
        }

        /* Views */
        .view {
            display: none;
            padding-bottom: 20px;
        }

        .view.active {
            display: block;
        }

        /* Profile View */
        .profile-header {
            text-align: center;
        }

        .profile-header h2 {
            color: var(--color-text-dark);
            margin-bottom: 20px;
        }

        .profile-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .profile-stat {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .profile-stat .value {
            font-size: 32px;
            font-weight: bold;
            color: var(--color-primary);
        }

        .profile-stat .label {
            font-size: 14px;
            color: var(--color-text-light);
            margin-top: 8px;
        }

        .achievements h2 {
            color: var(--color-text-dark);
            margin-bottom: 15px;
        }

        .achievement-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 10px;
        }

        .achievement-icon {
            font-size: 32px;
        }

        .achievement-info {
            flex: 1;
        }

        .achievement-info h3 {
            color: var(--color-text-dark);
            margin-bottom: 3px;
        }

        .achievement-info p {
            color: var(--color-text-light);
            font-size: 14px;
        }

        .achievement-status {
            font-size: 28px;
        }

        /* Settings View */
        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }

        .setting-info h3 {
            color: var(--color-text-dark);
            margin-bottom: 5px;
        }

        .setting-info p {
            color: var(--color-text-light);
            font-size: 14px;
        }

        .toggle-switch {
            position: relative;
            width: 60px;
            height: 30px;
            background: #ccc;
            border-radius: 15px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .toggle-switch.active {
            background: var(--color-primary);
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            top: 3px;
            left: 3px;
            width: 24px;
            height: 24px;
            background: white;
            border-radius: 50%;
            transition: left 0.3s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .toggle-switch.active::after {
            left: 33px;
        }

        /* Loading */
        .loading {
            text-align: center;
            padding: 50px 20px;
            color: white;
            font-size: 18px;
        }

        .loading::after {
            content: '...';
            animation: dots 1.5s steps(4, end) infinite;
        }

        @keyframes dots {
            0%, 20% { content: '.'; }
            40% { content: '..'; }
            60%, 100% { content: '...'; }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .tiles-grid {
                grid-template-columns: 1fr;
            }

            .match-pairs {
                grid-template-columns: 1fr;
            }

            .app-header h1 {
                font-size: 20px;
            }

            .section-header h2 {
                font-size: 16px;
            }

            .game-buttons {
                flex-direction: column;
            }

            .game-button {
                width: 100%;
            }
        }

        /* Print Styles */
        @media print {
            .bottom-nav, .date-navigation, .game-container, .section-header button {
                display: none !important;
            }
            
            body {
                background: white;
                padding-bottom: 0;
            }
            
            .section-view {
                position: static;
            }

            .section-header {
                background: #333;
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
        }

        /* Hide elements when section is open */
        body.section-open .app-header,
        body.section-open .container,
        body.section-open .bottom-nav {
            display: none;
        }

        /* Mazel Tov Section */
        .mazel-tov-section {
            background: linear-gradient(135deg, #fff3e0, #ffe0b2);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .mazel-tov-section h3 {
            color: var(--color-text-dark);
            margin-bottom: 15px;
            text-align: center;
            font-size: 20px;
        }

        .mazel-tov-item {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            border-left: 4px solid #ffa726;
        }

        .mazel-tov-item h4 {
            color: var(--color-primary);
            margin-bottom: 5px;
        }

        .mazel-tov-item p {
            color: var(--color-text-light);
            font-size: 14px;
            margin: 3px 0;
        }
    </style>
</head>
<body>
    <!-- Main App Header -->
    <div class="app-header">
        <h1>◊ë◊¥◊î üìñ –•–∏—Ç–∞—Å –¥–ª—è –¥–µ—Ç–µ–π</h1>
        <p>–ñ–∏—Ç—å –≤ –Ω–æ–≥—É —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º!</p>
    </div>

    <!-- Main View -->
    <div class="view active" id="homeView">
        <div class="container">
            <!-- Date Card -->
            <div class="card date-card">
                <h2 id="hebrewDate">–ó–∞–≥—Ä—É–∑–∫–∞...</h2>
                <div class="dedication" id="dedication"></div>
                <div class="date-navigation">
                    <button class="btn" onclick="app.navigateDate(-1)">‚óÄ –ü—Ä–µ–¥</button>
                    <button class="btn" onclick="app.navigateToToday()">üìÖ –°–µ–≥–æ–¥–Ω—è</button>
                    <button class="btn" onclick="window.print()">üñ®Ô∏è –ü–µ—á–∞—Ç—å</button>
                    <button class="btn" onclick="app.navigateDate(1)">–°–ª–µ–¥ ‚ñ∂</button>
                </div>
            </div>

            <!-- Mazel Tov Section -->
            <div id="mazelTovSection"></div>

            <!-- Progress Card -->
            <div class="card progress-card">
                <div class="progress-stats">
                    <div class="progress-stat">
                        <div class="value" id="scoreValue">0</div>
                        <div class="label">üìä –ë–∞–ª–ª—ã</div>
                    </div>
                    <div class="progress-stat">
                        <div class="value" id="starsValue">0</div>
                        <div class="label">‚≠ê –ó–≤—ë–∑–¥—ã</div>
                    </div>
                    <div class="progress-stat">
                        <div class="value" id="completedValue">0/6</div>
                        <div class="label">‚úÖ –ü—Ä–æ–π–¥–µ–Ω–æ</div>
                    </div>
                </div>
                <div class="progress-bar-container">
                    <div class="progress-bar" id="progressBar" style="width: 0%">0%</div>
                </div>
            </div>

            <!-- Tiles Grid -->
            <div class="tiles-grid" id="tilesGrid">
                <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö</div>
            </div>
        </div>
    </div>

    <!-- Profile View -->
    <div class="view" id="profileView">
        <div class="container">
            <div class="card profile-header">
                <h2>üë§ –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h2>
                <div class="profile-stats">
                    <div class="profile-stat">
                        <div class="value" id="totalScore">0</div>
                        <div class="label">üèÜ –í—Å–µ–≥–æ –±–∞–ª–ª–æ–≤</div>
                    </div>
                    <div class="profile-stat">
                        <div class="value" id="totalStars">0</div>
                        <div class="label">‚≠ê –í—Å–µ–≥–æ –∑–≤—ë–∑–¥</div>
                    </div>
                    <div class="profile-stat">
                        <div class="value" id="totalDays">0</div>
                        <div class="label">üìÖ –î–Ω–µ–π –ø–æ–¥—Ä—è–¥</div>
                    </div>
                </div>
            </div>

            <div class="card achievements">
                <h2>üéØ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h2>
                <div class="achievement-item">
                    <div class="achievement-icon">ü•á</div>
                    <div class="achievement-info">
                        <h3>–ü–µ—Ä–≤–∞—è –Ω–µ–¥–µ–ª—è</h3>
                        <p>–ò–∑—É—á–∞–π 7 –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥</p>
                    </div>
                    <div class="achievement-status" id="achievement1">üîí</div>
                </div>
                <div class="achievement-item">
                    <div class="achievement-icon">üî•</div>
                    <div class="achievement-info">
                        <h3>–í –æ–≥–Ω–µ</h3>
                        <p>14 –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥</p>
                    </div>
                    <div class="achievement-status" id="achievement2">üîí</div>
                </div>
                <div class="achievement-item">
                    <div class="achievement-icon">‚≠ê</div>
                    <div class="achievement-info">
                        <h3>–ó–≤—ë–∑–¥–Ω—ã–π</h3>
                        <p>–°–æ–±–µ—Ä–∏ 30 –∑–≤—ë–∑–¥</p>
                    </div>
                    <div class="achievement-status" id="achievement3">üîí</div>
                </div>
                <div class="achievement-item">
                    <div class="achievement-icon">üèÜ</div>
                    <div class="achievement-info">
                        <h3>–ß–µ–º–ø–∏–æ–Ω</h3>
                        <p>500 –±–∞–ª–ª–æ–≤</p>
                    </div>
                    <div class="achievement-status" id="achievement4">üîí</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings View -->
    <div class="view" id="settingsView">
        <div class="container">
            <div class="card setting-item" onclick="app.toggleSetting('sound')">
                <div class="setting-info">
                    <h3>üîä –ó–≤—É–∫</h3>
                    <p>–ó–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã</p>
                </div>
                <div class="toggle-switch active" id="soundToggle"></div>
            </div>
            <div class="card setting-item" onclick="app.toggleSetting('animations')">
                <div class="setting-info">
                    <h3>‚ú® –ê–Ω–∏–º–∞—Ü–∏–∏</h3>
                    <p>–ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã</p>
                </div>
                <div class="toggle-switch active" id="animationsToggle"></div>
            </div>
            <div class="card setting-item" onclick="app.toggleSetting('darkMode')">
                <div class="setting-info">
                    <h3>üåô –¢—ë–º–Ω–∞—è —Ç–µ–º–∞</h3>
                    <p>–†–µ–∂–∏–º –¥–ª—è –≤–µ—á–µ—Ä–∞</p>
                </div>
                <div class="toggle-switch" id="darkModeToggle"></div>
            </div>
            <div class="card setting-item" onclick="app.resetProgress()">
                <div class="setting-info">
                    <h3>üóëÔ∏è –°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å</h3>
                    <p>–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Section View (Fullscreen) -->
    <div class="section-view" id="sectionView">
        <div class="section-header">
            <button class="btn" onclick="app.closeSection()">‚Üê –ù–∞–∑–∞–¥</button>
            <h2 id="sectionTitle">–†–∞–∑–¥–µ–ª</h2>
            <button class="btn" onclick="app.speakContent()">üîä</button>
        </div>
        <div class="section-content" id="sectionContent">
            <!-- Content will be loaded here -->
        </div>
    </div>

    <!-- Bottom Navigation -->
    <div class="bottom-nav">
        <div class="nav-item active" data-view="homeView">
            <div class="nav-icon">üè†</div>
            <div class="nav-label">–ì–ª–∞–≤–Ω–∞—è</div>
        </div>
        <div class="nav-item" data-view="profileView">
            <div class="nav-icon">üë§</div>
            <div class="nav-label">–ü—Ä–æ—Ñ–∏–ª—å</div>
        </div>
        <div class="nav-item" data-view="settingsView">
            <div class="nav-icon">‚öôÔ∏è</div>
            <div class="nav-label">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
        </div>
    </div>

    <script>
        class ChitasApp {
            constructor() {
                this.data = null;
                this.index = null;
                this.currentDate = this.getTodayDate();
                this.currentSection = null;
                this.state = this.loadProgress();
                this.matchGame = { selected: [], matched: [] };
                this.init();
            }

            init() {
                this.setupEventListeners();
                this.loadIndex();
            }

            setupEventListeners() {
                // Bottom navigation
                document.querySelectorAll('.nav-item').forEach(item => {
                    item.addEventListener('click', () => {
                        const viewId = item.dataset.view;
                        this.switchView(viewId);
                    });
                });
            }

            getTodayDate() {
                const url = new URL(window.location.href);
                const dateParam = url.searchParams.get('date');
                if (dateParam) return dateParam;
                
                const today = new Date();
                return today.toISOString().split('T')[0];
            }

            async loadIndex() {
                try {
                    // For demo, create index data
                    this.index = {
                        dates: [{
                            date: this.currentDate,
                            available: true,
                            filename: `${this.currentDate}.json`
                        }]
                    };
                    await this.loadData();
                } catch (error) {
                    console.error('Error loading index:', error);
                    this.showError('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–Ω–¥–µ–∫—Å–∞');
                }
            }

            async loadData() {
                try {
                    // For demo, check if we have the JSON file created by Python
                    const response = await fetch(`${this.currentDate}.json`);
                    if (response.ok) {
                        this.data = await response.json();
                    } else {
                        // Fallback to demo data
                        this.data = this.createDemoData();
                    }
                    
                    this.renderPage();
                } catch (error) {
                    console.error('Error loading data:', error);
                    this.data = this.createDemoData();
                    this.renderPage();
                }
            }

            createDemoData() {
                // This would normally be loaded from JSON
                // For now, return the structure
                return {
                    date: this.currentDate,
                    hebrewDate: "9 –¢–µ–≤–µ—Ç–∞ 5786",
                    parsha: "–í–∞–µ—Ö–∏",
                    dedication: "–ó–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —É—Å–ø–µ—Ö –µ–≤—Ä–µ–µ–≤ –≤ –≠—Ä–µ—Ü –ò—Å—Ä–∞—ç–ª—å",
                    sections: [] // Will be populated from actual JSON
                };
            }

            renderPage() {
                this.updateDateDisplay();
                this.renderMazelTov();
                this.renderTiles();
                this.updateProgress();
                this.updateAchievements();
            }

            updateDateDisplay() {
                document.getElementById('hebrewDate').textContent = this.data.hebrewDate;
                document.getElementById('dedication').textContent = this.data.dedication;
            }

            renderMazelTov() {
                const container = document.getElementById('mazelTovSection');
                if (!this.data.mazalTov || this.data.mazalTov.length === 0) {
                    container.innerHTML = '';
                    return;
                }

                let html = '<div class="mazel-tov-section"><h3>üéâ –ú–∞–∑–∞–ª—å –¢–æ–≤!</h3>';
                this.data.mazalTov.forEach(mt => {
                    html += `
                        <div class="mazel-tov-item">
                            <h4>${mt.name}</h4>
                            <p>${mt.occasion}</p>
                            <p><small>${mt.location}</small></p>
                            <p><em>${mt.blessing}</em></p>
                        </div>
                    `;
                });
                html += '</div>';
                container.innerHTML = html;
            }

            renderTiles() {
                const grid = document.getElementById('tilesGrid');
                if (!this.data.sections || this.data.sections.length === 0) {
                    grid.innerHTML = '<div class="loading">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</div>';
                    return;
                }

                grid.innerHTML = '';
                this.data.sections.forEach(section => {
                    const tile = this.createTile(section);
                    grid.appendChild(tile);
                });
            }

            createTile(section) {
                const tile = document.createElement('div');
                tile.className = 'tile';
                tile.dataset.category = section.category;
                tile.style.setProperty('color', section.color);
                
                const isCompleted = this.state.completed[this.currentDate]?.[section.id] || false;
                const preview = this.getPreviewText(section);

                tile.innerHTML = `
                    <div class="tile-header">
                        <div class="tile-icon">${section.icon}</div>
                        <div class="tile-title-group">
                            <div class="tile-title">${section.title}</div>
                            <div class="tile-subtitle">${section.subtitle}</div>
                        </div>
                    </div>
                    <div class="tile-preview">${preview}</div>
                    <div class="tile-footer">
                        <div class="tile-points">+${section.points} –±–∞–ª–ª–æ–≤</div>
                        <div class="tile-status ${isCompleted ? 'completed' : 'pending'}">
                            ${isCompleted ? '‚úÖ –ü—Ä–æ–π–¥–µ–Ω–æ' : '‚è≥ –ù–µ –ø—Ä–æ–π–¥–µ–Ω–æ'}
                        </div>
                    </div>
                `;

                tile.addEventListener('click', () => this.openSection(section.id));
                return tile;
            }

            getPreviewText(section) {
                if (!section.content || !section.content.paragraphs) return '';
                const firstText = section.content.paragraphs.find(p => p.type === 'text');
                return firstText ? firstText.text.substring(0, 120) + '...' : '';
            }

            openSection(sectionId) {
                const section = this.data.sections.find(s => s.id === sectionId);
                if (!section) return;

                this.currentSection = section;
                document.body.classList.add('section-open');
                
                const sectionView = document.getElementById('sectionView');
                sectionView.classList.add('active');
                
                document.getElementById('sectionTitle').textContent = section.title;
                this.renderSectionContent(section);
                
                window.scrollTo(0, 0);
            }

            closeSection() {
                document.body.classList.remove('section-open');
                document.getElementById('sectionView').classList.remove('active');
                this.currentSection = null;
            }

            renderSectionContent(section) {
                const container = document.getElementById('sectionContent');
                let html = '';

                // Title
                if (section.content.title) {
                    html += `<h2 class="content-title">${section.content.title}</h2>`;
                }

                // Paragraphs
                section.content.paragraphs.forEach(para => {
                    html += this.renderParagraph(para);
                });

                // Games
                html += this.renderGames(section);

                container.innerHTML = html;
                this.attachGameHandlers(section);
            }

            renderParagraph(para) {
                const classList = ['content-paragraph', para.type].filter(Boolean).join(' ');
                let content = '';

                if (para.title) {
                    content += `<div class="paragraph-title">${para.title}</div>`;
                }
                content += para.text;

                return `<div class="${classList}">${content}</div>`;
            }

            renderGames(section) {
                if (!section.games || section.games.length === 0) return '';

                let html = '<div class="game-container">';
                
                if (section.games.length > 1) {
                    html += `
                        <div class="game-menu">
                            <h3>üéÆ –í—ã–±–µ—Ä–∏ –∏–≥—Ä—É!</h3>
                            <div class="game-buttons">
                    `;
                    section.games.forEach((game, index) => {
                        html += `<button class="game-button" data-game="${index}">${this.getGameIcon(game.type)} ${game.title}</button>`;
                    });
                    html += '</div></div>';
                }

                // Render all games (hidden initially if more than 1)
                section.games.forEach((game, index) => {
                    html += this.renderGame(game, index, section.games.length === 1);
                });

                html += '</div>';
                return html;
            }

            getGameIcon(type) {
                const icons = {
                    quiz: 'üéØ',
                    truefalse: '‚úì',
                    match: 'üîó',
                    reflection: 'ü§î'
                };
                return icons[type] || 'üéÆ';
            }

            renderGame(game, index, showNow) {
                const display = showNow ? 'active' : '';
                
                switch (game.type) {
                    case 'quiz':
                        return this.renderQuizGame(game, index, display);
                    case 'truefalse':
                        return this.renderTrueFalseGame(game, index, display);
                    case 'match':
                        return this.renderMatchGame(game, index, display);
                    case 'reflection':
                        return this.renderReflectionGame(game, index, display);
                    default:
                        return '';
                }
            }

            renderQuizGame(game, index, display) {
                let html = `<div class="quiz-game ${display}" data-game-index="${index}">`;
                html += `<h3 class="quiz-question">${game.question}</h3>`;
                html += '<div class="quiz-options">';
                
                game.options.forEach((option, i) => {
                    html += `<div class="quiz-option" data-option="${i}">${option}</div>`;
                });
                
                html += '</div>';
                html += `
                    <div class="quiz-feedback">
                        <div class="feedback-title"></div>
                        <div class="feedback-text"></div>
                    </div>
                `;
                html += '</div>';
                return html;
            }

            renderTrueFalseGame(game, index, display) {
                let html = `<div class="truefalse-game ${display}" data-game-index="${index}">`;
                html += '<div class="truefalse-questions">';
                
                game.questions.forEach((q, i) => {
                    html += `
                        <div class="truefalse-item" data-question="${i}">
                            <div class="truefalse-statement">${i + 1}. ${q.statement}</div>
                            <div class="truefalse-buttons">
                                <button class="truefalse-button" data-answer="true">‚úì –ü—Ä–∞–≤–¥–∞</button>
                                <button class="truefalse-button" data-answer="false">‚úó –õ–æ–∂—å</button>
                            </div>
                            <div class="truefalse-explanation">${q.explanation}</div>
                        </div>
                    `;
                });
                
                html += '</div></div>';
                return html;
            }

            renderMatchGame(game, index, display) {
                let html = `<div class="match-game ${display}" data-game-index="${index}">`;
                html += `<div class="match-instruction">${game.instruction}</div>`;
                html += '<div class="match-pairs">';
                
                // Left column
                html += '<div class="match-column">';
                game.pairs.forEach((pair, i) => {
                    html += `<div class="match-item" data-side="left" data-pair="${i}">${pair.left}</div>`;
                });
                html += '</div>';
                
                // Right column (shuffled)
                html += '<div class="match-column">';
                const shuffled = [...game.pairs].sort(() => Math.random() - 0.5);
                shuffled.forEach((pair, i) => {
                    const originalIndex = game.pairs.indexOf(pair);
                    html += `<div class="match-item" data-side="right" data-pair="${originalIndex}">${pair.right}</div>`;
                });
                html += '</div>';
                
                html += '</div></div>';
                return html;
            }

            renderReflectionGame(game, index, display) {
                return `
                    <div class="reflection-game ${display}" data-game-index="${index}">
                        <div class="reflection-question">${game.question}</div>
                        <textarea class="reflection-textarea" placeholder="${game.prompt}"></textarea>
                        <button class="btn reflection-save">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏–µ</button>
                    </div>
                `;
            }

            attachGameHandlers(section) {
                // Game menu buttons
                document.querySelectorAll('.game-button').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const gameIndex = parseInt(e.target.dataset.game);
                        this.showGame(gameIndex);
                    });
                });

                // Quiz handlers
                document.querySelectorAll('.quiz-option').forEach(opt => {
                    opt.addEventListener('click', (e) => {
                        const option = parseInt(e.target.dataset.option);
                        const gameEl = e.target.closest('.quiz-game');
                        const gameIndex = parseInt(gameEl.dataset.gameIndex);
                        this.handleQuizAnswer(section, gameIndex, option);
                    });
                });

                // True/False handlers
                document.querySelectorAll('.truefalse-button').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const answer = e.target.dataset.answer === 'true';
                        const item = e.target.closest('.truefalse-item');
                        const questionIndex = parseInt(item.dataset.question);
                        const gameEl = e.target.closest('.truefalse-game');
                        const gameIndex = parseInt(gameEl.dataset.gameIndex);
                        this.handleTrueFalseAnswer(section, gameIndex, questionIndex, answer, item, e.target);
                    });
                });

                // Match handlers
                document.querySelectorAll('.match-item').forEach(item => {
                    item.addEventListener('click', (e) => {
                        this.handleMatchClick(section, e.target);
                    });
                });

                // Reflection handler
                document.querySelectorAll('.reflection-save').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const game = e.target.closest('.reflection-game');
                        const textarea = game.querySelector('.reflection-textarea');
                        this.handleReflectionSave(section, textarea.value);
                    });
                });
            }

            showGame(gameIndex) {
                document.querySelectorAll('.quiz-game, .truefalse-game, .match-game, .reflection-game').forEach(g => {
                    g.classList.remove('active');
                });
                document.querySelector(`.quiz-game[data-game-index="${gameIndex}"], 
                                       .truefalse-game[data-game-index="${gameIndex}"],
                                       .match-game[data-game-index="${gameIndex}"],
                                       .reflection-game[data-game-index="${gameIndex}"]`).classList.add('active');
                document.querySelector('.game-menu').style.display = 'none';
            }

            handleQuizAnswer(section, gameIndex, optionIndex) {
                const game = section.games[gameIndex];
                const isCorrect = optionIndex === game.correctIndex;
                
                // Disable all options
                document.querySelectorAll('.quiz-option').forEach(opt => {
                    opt.classList.add('disabled');
                });

                // Mark selected option
                const options = document.querySelectorAll('.quiz-option');
                if (isCorrect) {
                    options[optionIndex].classList.add('correct');
                    this.showFeedback(true, game.explanation);
                    this.addScore(section.points, section.id);
                } else {
                    options[optionIndex].classList.add('incorrect');
                    options[game.correctIndex].classList.add('correct');
                    this.showFeedback(false, game.explanation);
                }
            }

            showFeedback(success, text) {
                const feedback = document.querySelector('.quiz-feedback');
                feedback.className = success ? 'quiz-feedback success show' : 'quiz-feedback error show';
                feedback.querySelector('.feedback-title').textContent = success ? 'üéâ –û—Ç–ª–∏—á–Ω–æ!' : 'üòî –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ';
                feedback.querySelector('.feedback-text').textContent = text;
            }

            handleTrueFalseAnswer(section, gameIndex, questionIndex, answer, itemEl, buttonEl) {
                const game = section.games[gameIndex];
                const question = game.questions[questionIndex];
                const isCorrect = answer === question.correct;

                // Disable buttons
                itemEl.querySelectorAll('.truefalse-button').forEach(btn => {
                    btn.classList.add('disabled');
                });

                // Mark answer
                if (isCorrect) {
                    buttonEl.classList.add('correct');
                } else {
                    buttonEl.classList.add('incorrect');
                    // Show correct answer
                    const correctBtn = itemEl.querySelector(`[data-answer="${question.correct}"]`);
                    correctBtn.classList.add('correct');
                }

                // Show explanation
                const explanation = itemEl.querySelector('.truefalse-explanation');
                explanation.classList.add('show');

                // Check if all questions answered
                const allAnswered = Array.from(itemEl.parentElement.querySelectorAll('.truefalse-item'))
                    .every(item => item.querySelector('.truefalse-button.disabled'));
                
                if (allAnswered) {
                    this.addScore(section.points, section.id);
                }
            }

            handleMatchClick(section, item) {
                if (item.classList.contains('matched') || item.classList.contains('disabled')) return;

                const pairId = parseInt(item.dataset.pair);
                const side = item.dataset.side;

                // Toggle selection
                if (item.classList.contains('selected')) {
                    item.classList.remove('selected');
                    this.matchGame.selected = this.matchGame.selected.filter(s => !(s.side === side && s.pair === pairId));
                } else {
                    item.classList.add('selected');
                    this.matchGame.selected.push({ side, pair: pairId, element: item });
                }

                // Check for match
                if (this.matchGame.selected.length === 2) {
                    const [first, second] = this.matchGame.selected;
                    if (first.side !== second.side && first.pair === second.pair) {
                        // Match!
                        first.element.classList.remove('selected');
                        second.element.classList.remove('selected');
                        first.element.classList.add('matched');
                        second.element.classList.add('matched');
                        this.matchGame.matched.push(first.pair);
                        
                        // Check if all matched
                        const gameEl = item.closest('.match-game');
                        const totalPairs = gameEl.querySelectorAll('.match-item[data-side="left"]').length;
                        if (this.matchGame.matched.length === totalPairs) {
                            this.addScore(section.points, section.id);
                        }
                    } else {
                        // No match - deselect after delay
                        setTimeout(() => {
                            first.element.classList.remove('selected');
                            second.element.classList.remove('selected');
                        }, 500);
                    }
                    this.matchGame.selected = [];
                }
            }

            handleReflectionSave(section, text) {
                if (text.trim().length > 10) {
                    // Save reflection (in real app, save to localStorage or server)
                    this.addScore(section.points, section.id);
                    alert('üíæ –†–∞–∑–º—ã—à–ª–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ!');
                } else {
                    alert('‚úçÔ∏è –ù–∞–ø–∏—à–∏ —Ö–æ—Ç—è –±—ã –ø–∞—Ä—É –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π');
                }
            }

            addScore(points, sectionId) {
                const dateKey = this.currentDate;
                
                // Initialize date if needed
                if (!this.state.completed[dateKey]) {
                    this.state.completed[dateKey] = {};
                }

                // Only add points if not already completed
                if (!this.state.completed[dateKey][sectionId]) {
                    this.state.score += points;
                    this.state.stars += 1;
                    this.state.completed[dateKey][sectionId] = true;
                    
                    this.saveProgress();
                    this.updateProgress();
                    this.updateAchievements();
                    
                    // Update tile status
                    this.renderTiles();
                }
            }

            updateProgress() {
                const dateKey = this.currentDate;
                const completedCount = Object.keys(this.state.completed[dateKey] || {}).length;
                const totalSections = this.data.sections.length;
                const percentage = Math.round((completedCount / totalSections) * 100);

                document.getElementById('scoreValue').textContent = this.state.score;
                document.getElementById('starsValue').textContent = this.state.stars;
                document.getElementById('completedValue').textContent = `${completedCount}/${totalSections}`;
                
                const progressBar = document.getElementById('progressBar');
                progressBar.style.width = `${percentage}%`;
                progressBar.textContent = `${percentage}%`;
            }

            updateAchievements() {
                const totalDays = Object.keys(this.state.completed).length;
                
                document.getElementById('totalScore').textContent = this.state.score;
                document.getElementById('totalStars').textContent = this.state.stars;
                document.getElementById('totalDays').textContent = totalDays;

                // Update achievement statuses
                document.getElementById('achievement1').textContent = totalDays >= 7 ? '‚úÖ' : 'üîí';
                document.getElementById('achievement2').textContent = totalDays >= 14 ? '‚úÖ' : 'üîí';
                document.getElementById('achievement3').text navigateDate(delta) 
                document.getElementById('achievement3').textContent = this.state.stars >= 30 ? '‚úÖ' : 'üîí';
                document.getElementById('achievement4').textContent = this.state.score >= 500 ? '‚úÖ' : 'üîí';
}


       navigateDate(delta) {
    const current = new Date(this.currentDate);
    current.setDate(current.getDate() + delta);
    this.currentDate = current.toISOString().split('T')[0];
    const url = new URL(window.location.href);
    url.searchParams.set('date', this.currentDate);
    window.history.pushState({}, '', url);
    this.loadData();
}

       navigateToToday() {
    const today = new Date();
    this.currentDate = today.toISOString().split('T')[0];
    const url = new URL(window.location.href);
    url.searchParams.set('date', this.currentDate);
    window.history.pushState({}, '', url);
    this.loadData();
}

        switchView(viewId) {
            // Update views
            document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
            document.getElementById(viewId).classList.add('active');
            
            // Update nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.toggle('active', item.dataset.view === viewId);
            });

            window.scrollTo(0, 0);
        }

        toggleSetting(setting) {
            this.state.settings[setting] = !this.state.settings[setting];
            this.saveProgress();
            
            const toggleId = setting + 'Toggle';
            const toggle = document.getElementById(toggleId);
            if (toggle) {
                toggle.classList.toggle('active', this.state.settings[setting]);
            }

            // Apply dark mode if needed
            if (setting === 'darkMode') {
                document.body.classList.toggle('dark-mode', this.state.settings[setting]);
            }
        }

        resetProgress() {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã? –í–µ—Å—å –ø—Ä–æ–≥—Ä–µ—Å—Å –±—É–¥–µ—Ç —É–¥–∞–ª—ë–Ω!')) {
                this.state = {
                    score: 0,
                    stars: 0,
                    completed: {},
                    settings: {
                        sound: true,
                        animations: true,
                        darkMode: false
                    }
                };
                this.saveProgress();
                this.updateProgress();
                this.updateAchievements();
                this.renderTiles();
                alert('‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å —Å–±—Ä–æ—à–µ–Ω!');
            }
        }

        speakContent() {
            if (!this.currentSection) return;
            
            if ('speechSynthesis' in window) {
                // Cancel any ongoing speech
                window.speechSynthesis.cancel();
                
                // Get text content
                const text = this.currentSection.content.paragraphs
                    .map(p => p.text)
                    .join('. ');
                
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'ru-RU';
                utterance.rate = 0.9;
                utterance.pitch = 1;
                
                window.speechSynthesis.speak(utterance);
            } else {
                alert('–û–∑–≤—É—á–∏–≤–∞–Ω–∏–µ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ');
            }
        }

        loadProgress() {
            try {
                const saved = localStorage.getItem('chitasProgress');
                if (saved) {
                    return JSON.parse(saved);
                }
            } catch (e) {
                console.error('Error loading progress:', e);
            }
            
            return {
                score: 0,
                stars: 0,
                completed: {},
                settings: {
                    sound: true,
                    animations: true,
                    darkMode: false
                }
            };
        }

        saveProgress() {
            try {
                localStorage.setItem('chitasProgress', JSON.stringify(this.state));
            } catch (e) {
                console.error('Error saving progress:', e);
            }
        }

        showError(message) {
            const grid = document.getElementById('tilesGrid');
            grid.innerHTML = `<div class="loading">${message}</div>`;
        }
    }

    // Initialize app
    let app;
    document.addEventListener('DOMContentLoaded', () => {
        app = new ChitasApp();
    });

    // Handle back button
    window.addEventListener('popstate', () => {
        if (app) {
            app.currentDate = app.getTodayDate();
            app.loadData();
        }
    });
</script>
