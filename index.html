<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#667eea">
    <title>◊ë◊¥◊î | –•–∏—Ç–∞—Å –¥–ª—è –≤—É–Ω–¥–µ—Ä–∫–∏–Ω–¥–æ–≤</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="audio-styles.css">
</head>
<body>
    <header class="app-header">
        <div class="bh-corner">◊ë◊¥◊î</div>
        <h1>üìñ –•–∏—Ç–∞—Å –¥–ª—è –≤—É–Ω–¥–µ—Ä–∫–∏–Ω–¥–æ–≤</h1>
        <p>–ñ–∏—Ç—å –≤ –Ω–æ–≥—É —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º!</p>
    </header>

    <div class="view active" id="homeView">
        <div class="container">
            <div class="card date-card">
                <h2 id="hebrewDate">–ó–∞–≥—Ä—É–∑–∫–∞...</h2>
                <div class="dedication" id="dedication"></div>
            </div>

            <div id="mazelTovSection"></div>

            <div class="card progress-card">
                <div class="progress-stats">
                    <div class="progress-stat">
                        <div class="value" id="scoreValue">0</div>
                        <div class="label">üìä –ë–∞–ª–ª—ã</div>
                    </div>
                    <div class="progress-stat">
                        <div class="value" id="starsValue">0</div>
                        <div class="label">‚≠ê –ó–≤—ë–∑–¥—ã</div>
                    </div>
                    <div class="progress-stat">
                        <div class="value" id="completedValue">0/6</div>
                        <div class="label">‚úÖ –ü—Ä–æ–π–¥–µ–Ω–æ</div>
                    </div>
                </div>
                <div class="progress-bar-container">
                    <div class="progress-bar" id="progressBar" style="width: 0%">0%</div>
                </div>
            </div>

            <div class="tiles-grid" id="tilesGrid">
                <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö</div>
            </div>

            <!-- Date Navigation moved to bottom -->
            <nav class="date-navigation-bottom">
                <button class="btn" id="prevDayBtn">‚óÄ –ü—Ä–µ–¥</button>
                <button class="btn" id="todayBtn">üìÖ –°–µ–≥–æ–¥–Ω—è</button>
                <button class="btn sound-toggle" id="soundToggleBtn" onclick="toggleSound(this)">üîä –ó–≤—É–∫ –í–ö–õ</button>
                <button class="btn" id="nextDayBtn">–°–ª–µ–¥ ‚ñ∂</button>
            </nav>
        </div>
    </div>

    <div class="view" id="profileView">
        <div class="container">
            <!-- Auth Container -->
            <div class="card auth-card">
                <div id="authContainer"></div>
            </div>

            <!-- –°—Ç—Ä–∏–∫ (–û–≥–æ–Ω—ë–∫) - –ö–†–ò–¢–ò–ß–ù–û -->
            <div class="card streak-card">
                <h2>üî• –¢–≤–æ–π —Å—Ç—Ä–∏–∫</h2>
                <div class="streak-display">
                    <div class="streak-flame" id="streakIcon">üî•</div>
                    <div class="streak-counter">
                        <div class="streak-value" id="currentStreak">0</div>
                        <div class="streak-label">–¥–Ω–µ–π –ø–æ–¥—Ä—è–¥</div>
                    </div>
                </div>
            </div>

            <!-- –£—Ä–æ–≤–µ–Ω—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
            <div class="card level-card">
                <h2>üìö –¢–≤–æ–π —É—Ä–æ–≤–µ–Ω—å</h2>
                <div class="level-display">
                    <div class="level-icon" id="levelIcon">üìö</div>
                    <div class="level-info">
                        <div class="level-name" id="userLevel">–¢–∞–ª–º–∏–¥</div>
                        <div class="level-progress-text" id="levelProgress">0/7</div>
                    </div>
                </div>
                <div class="level-description">
                    –¢–∞–ª–º–∏–¥ ‚Üí –ë–∞–∫–∫–∏ ‚Üí –õ–∞–º–¥–∞–Ω ‚Üí –†–∞–≤ ‚Üí –ì–∞–æ–Ω
                </div>
            </div>

            <div class="card profile-header">
                <h2>üë§ –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h2>
                <div class="profile-stats">
                    <div class="profile-stat">
                        <div class="value" id="totalScore">0</div>
                        <div class="label">üèÜ –í—Å–µ–≥–æ –±–∞–ª–ª–æ–≤</div>
                    </div>
                    <div class="profile-stat">
                        <div class="value" id="totalStars">0</div>
                        <div class="label">‚≠ê –í—Å–µ–≥–æ –∑–≤—ë–∑–¥</div>
                    </div>
                    <div class="profile-stat">
                        <div class="value" id="totalDays">0</div>
                        <div class="label">üìÖ –í—Å–µ–≥–æ –¥–Ω–µ–π</div>
                    </div>
                </div>
            </div>

            <!-- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è - 5 —É—Ä–æ–≤–Ω–µ–π -->
            <div class="card achievements">
                <h2>üéØ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h2>
                <div class="achievement-item">
                    <div class="achievement-icon">ü•á</div>
                    <div class="achievement-info">
                        <h3>–¢–∞–ª–º–∏–¥</h3>
                        <p>7 –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥</p>
                    </div>
                    <div class="achievement-status" id="achievement1">üîí</div>
                </div>
                <div class="achievement-item">
                    <div class="achievement-icon">üî•</div>
                    <div class="achievement-info">
                        <h3>–ë–∞–∫–∫–∏</h3>
                        <p>14 –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥</p>
                    </div>
                    <div class="achievement-status" id="achievement2">üîí</div>
                </div>
                <div class="achievement-item">
                    <div class="achievement-icon">üéì</div>
                    <div class="achievement-info">
                        <h3>–õ–∞–º–¥–∞–Ω</h3>
                        <p>21 –¥–µ–Ω—å –ø–æ–¥—Ä—è–¥</p>
                    </div>
                    <div class="achievement-status" id="achievement3">üîí</div>
                </div>
                <div class="achievement-item">
                    <div class="achievement-icon">üë®‚Äçüè´</div>
                    <div class="achievement-info">
                        <h3>–†–∞–≤</h3>
                        <p>30 –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥</p>
                    </div>
                    <div class="achievement-status" id="achievement4">üîí</div>
                </div>
                <div class="achievement-item">
                    <div class="achievement-icon">‚≠ê</div>
                    <div class="achievement-info">
                        <h3>–ì–∞–æ–Ω</h3>
                        <p>50 –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥</p>
                    </div>
                    <div class="achievement-status" id="achievement5">üîí</div>
                </div>
            </div>

            <!-- –ó–Ω–∞—á–∫–∏ –∑–∞ –Ω–µ–¥–µ–ª–∏ -->
            <div class="card weekly-badges">
                <h2>üèÖ –ó–Ω–∞—á–∫–∏ –∑–∞ –Ω–µ–¥–µ–ª–∏</h2>
                <div class="weekly-badge-count">
                    <span id="weeklyBadgesCount">0</span> –Ω–µ–¥–µ–ª—å –∑–∞–≤–µ—Ä—à–µ–Ω–æ
                </div>
                <div id="weeklyBadgesContainer"></div>
            </div>

            <!-- –ü–æ–¥–µ–ª–∏—Ç—å—Å—è —É—Å–ø–µ—Ö–∞–º–∏ -->
            <div class="card share-progress">
                <h2>üì§ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è —É—Å–ø–µ—Ö–∞–º–∏</h2>
                <div class="share-buttons">
                    <button class="share-btn whatsapp" id="shareWhatsAppBtn">
                        <span class="share-icon">üí¨</span>
                        WhatsApp
                    </button>
                    <button class="share-btn telegram" id="shareTelegramBtn">
                        <span class="share-icon">‚úàÔ∏è</span>
                        Telegram
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="view" id="helpView">
        <div class="container">
            <div class="card setting-item" data-help-section="about">
                <div class="setting-info">
                    <h3>üìñ –û –ø—Ä–æ–µ–∫—Ç–µ</h3>
                    <p>–£–∑–Ω–∞–π—Ç–µ –±–æ–ª—å—à–µ –æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏</p>
                </div>
            </div>
            <div class="card setting-item" data-help-section="howto">
                <div class="setting-info">
                    <h3>üéÆ –ö–∞–∫ –∏–≥—Ä–∞—Ç—å</h3>
                    <p>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é</p>
                </div>
            </div>
            <div class="card setting-item" data-help-section="privacy">
                <div class="setting-info">
                    <h3>üîí –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å</h3>
                    <p>–ü–æ–ª–∏—Ç–∏–∫–∞ –∑–∞—â–∏—Ç—ã –¥–∞–Ω–Ω—ã—Ö</p>
                </div>
            </div>
            <div class="card setting-item" id="contactEmailBtn">
                <div class="setting-info">
                    <h3>‚úâÔ∏è –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å</h3>
                    <p>–ü–∏—à–∏—Ç–µ –Ω–∞ office@mychitas.app</p>
                </div>
            </div>
            <div class="card setting-item" id="shareAppBtn">
                <div class="setting-info">
                    <h3>üì§ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è</h3>
                    <p>www.mychitas.app</p>
                </div>
            </div>
        </div>
    </div>

    <div class="view" id="settingsView">
        <div class="container">
            <div class="card setting-item" data-setting="sound">
                <div class="setting-info">
                    <h3>üîä –ó–≤—É–∫</h3>
                    <p>–ó–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã</p>
                </div>
                <div class="toggle-switch active" id="soundToggle"></div>
            </div>
            <div class="card setting-item" data-setting="animations">
                <div class="setting-info">
                    <h3>‚ú® –ê–Ω–∏–º–∞—Ü–∏–∏</h3>
                    <p>–ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã</p>
                </div>
                <div class="toggle-switch active" id="animationsToggle"></div>
            </div>
            <div class="card setting-item" data-setting="darkMode">
                <div class="setting-info">
                    <h3>üåô –¢—ë–º–Ω–∞—è —Ç–µ–º–∞</h3>
                    <p>–†–µ–∂–∏–º –¥–ª—è –≤–µ—á–µ—Ä–∞</p>
                </div>
                <div class="toggle-switch" id="darkModeToggle"></div>
            </div>
            <div class="card setting-item" id="syncProgressBtn">
                <div class="setting-info">
                    <h3>‚òÅÔ∏è –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è</h3>
                    <p>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –≤ –æ–±–ª–∞–∫–æ</p>
                </div>
            </div>
            <div class="card setting-item" id="loadProgressBtn">
                <div class="setting-info">
                    <h3>üì• –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ –æ–±–ª–∞–∫–∞</h3>
                    <p>–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å</p>
                </div>
            </div>
            <div class="card setting-item" id="printBtn">
                <div class="setting-info">
                    <h3>üñ®Ô∏è –ü–µ—á–∞—Ç—å</h3>
                    <p>–†–∞—Å–ø–µ—á–∞—Ç–∞—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã</p>
                </div>
            </div>
            <div class="card setting-item" id="resetBtn">
                <div class="setting-info">
                    <h3>üóëÔ∏è –°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å</h3>
                    <p>–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</p>
                </div>
            </div>
        </div>
    </div>

    <div class="section-view" id="sectionView">
        <div class="section-header">
            <button class="btn" id="closeSectionBtn">‚Üê –ù–∞–∑–∞–¥</button>
            <h2 id="sectionTitle">–†–∞–∑–¥–µ–ª</h2>
            <button class="btn" id="speakBtn">üîä</button>
        </div>
        <div class="section-content" id="sectionContent"></div>
    </div>

    <nav class="bottom-nav">
        <div class="nav-item active" data-view="homeView">
            <div class="nav-icon">üè†</div>
            <div class="nav-label">–ì–ª–∞–≤–Ω–∞—è</div>
        </div>
        <div class="nav-item" data-view="profileView">
            <div class="nav-icon">üë§</div>
            <div class="nav-label">–ü—Ä–æ—Ñ–∏–ª—å</div>
        </div>
        <div class="nav-item" data-view="helpView">
            <div class="nav-icon">‚ùì</div>
            <div class="nav-label">–ü–æ–º–æ—â—å</div>
        </div>
        <div class="nav-item" data-view="settingsView">
            <div class="nav-icon">‚öôÔ∏è</div>
            <div class="nav-label">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
        </div>
    </nav>

    <!-- Auth Modal -->
    <div id="authModal" class="modal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeAuthModal()">&times;</span>
            <h2 id="modalTitle">–í—Ö–æ–¥</h2>
            <div id="modalError" class="modal-error"></div>

            <!-- Sign In Form -->
            <div id="signInForm">
                <input type="email" id="emailInput" placeholder="Email" class="modal-input">
                <input type="password" id="passwordInput" placeholder="–ü–∞—Ä–æ–ª—å" class="modal-input">
                <button onclick="handleEmailSignIn(event)" class="modal-btn primary">–í–æ–π—Ç–∏</button>
                <button onclick="handleGoogleSignIn(event)" class="modal-btn google">
                    <span>üîê</span> –í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google
                </button>
                <div class="modal-links">
                    <a href="#" onclick="showResetPassword(); return false;">–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?</a>
                    <a href="#" onclick="showSignUpForm(); return false;">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
                </div>
            </div>

            <!-- Sign Up Form -->
            <div id="signUpForm" style="display:none;">
                <input type="text" id="nameInput" placeholder="–ò–º—è" class="modal-input">
                <input type="email" id="signUpEmail" placeholder="Email" class="modal-input">
                <input type="password" id="signUpPassword" placeholder="–ü–∞—Ä–æ–ª—å (–º–∏–Ω. 6 —Å–∏–º–≤–æ–ª–æ–≤)" class="modal-input">
                <button onclick="handleEmailSignUp(event)" class="modal-btn primary">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
                <div class="modal-links">
                    <a href="#" onclick="showSignInForm(); return false;">–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? –í–æ–π—Ç–∏</a>
                </div>
            </div>

            <!-- Reset Password Form -->
            <div id="resetPasswordForm" style="display:none;">
                <input type="email" id="resetEmail" placeholder="Email" class="modal-input">
                <button onclick="handlePasswordReset(event)" class="modal-btn primary">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É</button>
                <div class="modal-links">
                    <a href="#" onclick="showSignInForm(); return false;">–ù–∞–∑–∞–¥ –∫–æ –≤—Ö–æ–¥—É</a>
                </div>
            </div>
        </div>
    </div>

    <!-- ResponsiveVoice API - Free Non-Commercial License -->
    <!-- To get your own API key, visit: https://responsivevoice.org/register/ -->
    <script src="https://code.responsivevoice.org/responsivevoice.js?key=fJJxVj8T"></script>

    <!-- ResponsiveVoice Initialization Handler -->
    <script>
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ ResponsiveVoice
        let rvCheckCount = 0;
        const maxChecks = 50; // 5 —Å–µ–∫—É–Ω–¥ –º–∞–∫—Å–∏–º—É–º
        let audioPermissionGranted = false;

        function checkResponsiveVoice() {
            rvCheckCount++;

            if (window.responsiveVoice) {
                console.log('‚úÖ ResponsiveVoice loaded successfully!');
                console.log('üìä ResponsiveVoice info:', {
                    version: responsiveVoice.version || 'unknown',
                    voiceSupport: responsiveVoice.voiceSupport(),
                    voices: responsiveVoice.getVoices().length
                });

                // –í—ã–≤–æ–¥–∏–º –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ä—É—Å—Å–∫–∏–µ –≥–æ–ª–æ—Å–∞
                const russianVoices = responsiveVoice.getVoices().filter(v =>
                    v.name.includes('Russian') || v.lang.includes('ru')
                );
                console.log('üé§ Russian voices available:', russianVoices.map(v => v.name));

                // –£–≤–µ–¥–æ–º–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                if (responsiveVoice.voiceSupport()) {
                    console.log('üîä –û–∑–≤—É—á–∫–∞ –≥–æ—Ç–æ–≤–∞! ResponsiveVoice —Ä–∞–±–æ—Ç–∞–µ—Ç.');
                } else {
                    console.warn('‚ö†Ô∏è ResponsiveVoice –∑–∞–≥—Ä—É–∂–µ–Ω, –Ω–æ –≥–æ–ª–æ—Å–æ–≤–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞');
                }
            } else if (rvCheckCount < maxChecks) {
                // –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –ø—Ä–æ–≤–µ—Ä—è—Ç—å
                setTimeout(checkResponsiveVoice, 100);
            } else {
                console.error('‚ùå ResponsiveVoice –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª—Å—è –ø–æ—Å–ª–µ ' + (maxChecks * 100 / 1000) + ' —Å–µ–∫—É–Ω–¥');
                console.log('‚ÑπÔ∏è –ë—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π Web Speech API');
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∞—É–¥–∏–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
        async function initializeAudioPermissions() {
            if (audioPermissionGranted) return true;

            try {
                // –°–æ–∑–¥–∞–µ–º AudioContext –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
                const AudioContext = window.AudioContext || window.webkitAudioContext;
                if (AudioContext) {
                    const audioContext = new AudioContext();

                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
                    if (audioContext.state === 'suspended') {
                        await audioContext.resume();
                    }

                    console.log('üîä –ê—É–¥–∏–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω:', audioContext.state);
                    audioPermissionGranted = true;

                    // –ó–∞–∫—Ä—ã–≤–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç, –æ–Ω –Ω–∞–º –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω
                    audioContext.close();
                    return true;
                }
            } catch (error) {
                console.warn('‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∞—É–¥–∏–æ:', error);
            }

            // Fallback: –ø—Ä–æ–±—É–µ–º –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ —Ç–∏—Ö–∏–π –∑–≤—É–∫ –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
            try {
                if (window.responsiveVoice) {
                    // –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º –æ—á–µ–Ω—å –∫–æ—Ä–æ—Ç–∫–∏–π —Ç–∏—Ö–∏–π –∑–≤—É–∫
                    responsiveVoice.speak('', 'Russian Female', {
                        volume: 0,
                        onend: () => {
                            console.log('üîä –ê—É–¥–∏–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –ø–æ–ª—É—á–µ–Ω—ã');
                            audioPermissionGranted = true;
                        }
                    });
                } else if (window.speechSynthesis) {
                    const utterance = new SpeechSynthesisUtterance('');
                    utterance.volume = 0;
                    window.speechSynthesis.speak(utterance);
                    audioPermissionGranted = true;
                }
            } catch (error) {
                console.warn('‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –∞—É–¥–∏–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è:', error);
            }

            return audioPermissionGranted;
        }

        // –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –æ–∑–≤—É—á–∫–æ–π
        window.requestAudioPermission = initializeAudioPermissions;

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∫–ª–∏–∫–µ
        let firstInteraction = true;
        document.addEventListener('click', async function handleFirstClick() {
            if (firstInteraction) {
                firstInteraction = false;
                console.log('üëÜ –ü–µ—Ä–≤–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞—É–¥–∏–æ');
                await initializeAudioPermissions();
            }
        }, { once: false });

        // –ù–∞—á–∏–Ω–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ DOM
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', checkResponsiveVoice);
        } else {
            checkResponsiveVoice();
        }
    </script>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <!-- Firebase Config and Auth -->
    <script src="firebase-config.js"></script>
    <script src="auth-manager.js"></script>
    <script src="auth-ui.js"></script>

    <!-- Audio Reader -->
    <script src="audio-reader.js"></script>

    <!-- Games -->
    <script src="games/quiz.js"></script>
    <script src="games/truefalse.js"></script>
    <script src="games/match.js"></script>
    <script src="games/reflection.js"></script>
    <script src="games/wheel.js"></script>

    <!-- Achievements Manager -->
    <script src="achievements-manager.js"></script>

    <!-- Print Manager -->
    <script src="print-manager.js"></script>

    <!-- Main App -->
    <script src="app.js"></script>
</body>
</html>
