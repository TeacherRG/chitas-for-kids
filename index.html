<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#667eea">
    <title>◊ë◊¥◊î | –•–∏—Ç–∞—Å –¥–ª—è –¥–µ—Ç–µ–π</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header class="app-header">
        <div class="bh-corner">◊ë◊¥◊î</div>
        <h1>üìñ –•–∏—Ç–∞—Å –¥–ª—è –¥–µ—Ç–µ–π</h1>
        <p>–ñ–∏—Ç—å –≤ –Ω–æ–≥—É —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º!</p>
    </header>

    <div class="view active" id="homeView">
        <div class="container">
            <div class="card date-card">
                <h2 id="hebrewDate">–ó–∞–≥—Ä—É–∑–∫–∞...</h2>
                <div class="dedication" id="dedication"></div>
            </div>

            <div id="mazelTovSection"></div>

            <div class="card progress-card">
                <div class="progress-stats">
                    <div class="progress-stat">
                        <div class="value" id="scoreValue">0</div>
                        <div class="label">üìä –ë–∞–ª–ª—ã</div>
                    </div>
                    <div class="progress-stat">
                        <div class="value" id="starsValue">0</div>
                        <div class="label">‚≠ê –ó–≤—ë–∑–¥—ã</div>
                    </div>
                    <div class="progress-stat">
                        <div class="value" id="completedValue">0/6</div>
                        <div class="label">‚úÖ –ü—Ä–æ–π–¥–µ–Ω–æ</div>
                    </div>
                </div>
                <div class="progress-bar-container">
                    <div class="progress-bar" id="progressBar" style="width: 0%">0%</div>
                </div>
            </div>

            <div class="tiles-grid" id="tilesGrid">
                <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö</div>
            </div>

            <!-- Date Navigation moved to bottom -->
            <nav class="date-navigation-bottom">
                <button class="btn" id="prevDayBtn">‚óÄ –ü—Ä–µ–¥</button>
                <button class="btn" id="todayBtn">üìÖ –°–µ–≥–æ–¥–Ω—è</button>
                <button class="btn" id="nextDayBtn">–°–ª–µ–¥ ‚ñ∂</button>
            </nav>
        </div>
    </div>

    <div class="view" id="profileView">
        <div class="container">
            <!-- Auth Container -->
            <div class="card auth-card">
                <div id="authContainer"></div>
            </div>

            <!-- –°—Ç—Ä–∏–∫ (–û–≥–æ–Ω—ë–∫) - –ö–†–ò–¢–ò–ß–ù–û -->
            <div class="card streak-card">
                <h2>üî• –¢–≤–æ–π —Å—Ç—Ä–∏–∫</h2>
                <div class="streak-display">
                    <div class="streak-flame" id="streakIcon">üî•</div>
                    <div class="streak-counter">
                        <div class="streak-value" id="currentStreak">0</div>
                        <div class="streak-label">–¥–Ω–µ–π –ø–æ–¥—Ä—è–¥</div>
                    </div>
                </div>
            </div>

            <!-- –£—Ä–æ–≤–µ–Ω—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
            <div class="card level-card">
                <h2>üìö –¢–≤–æ–π —É—Ä–æ–≤–µ–Ω—å</h2>
                <div class="level-display">
                    <div class="level-icon" id="levelIcon">üìö</div>
                    <div class="level-info">
                        <div class="level-name" id="userLevel">–¢–∞–ª–º–∏–¥</div>
                        <div class="level-progress-text" id="levelProgress">0/7</div>
                    </div>
                </div>
                <div class="level-description">
                    –¢–∞–ª–º–∏–¥ ‚Üí –ë–∞–∫–∫–∏ ‚Üí –õ–∞–º–¥–∞–Ω ‚Üí –†–∞–≤ ‚Üí –ì–∞–æ–Ω
                </div>
            </div>

            <div class="card profile-header">
                <h2>üë§ –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h2>
                <div class="profile-stats">
                    <div class="profile-stat">
                        <div class="value" id="totalScore">0</div>
                        <div class="label">üèÜ –í—Å–µ–≥–æ –±–∞–ª–ª–æ–≤</div>
                    </div>
                    <div class="profile-stat">
                        <div class="value" id="totalStars">0</div>
                        <div class="label">‚≠ê –í—Å–µ–≥–æ –∑–≤—ë–∑–¥</div>
                    </div>
                    <div class="profile-stat">
                        <div class="value" id="totalDays">0</div>
                        <div class="label">üìÖ –í—Å–µ–≥–æ –¥–Ω–µ–π</div>
                    </div>
                </div>
            </div>

            <!-- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è - 5 —É—Ä–æ–≤–Ω–µ–π -->
            <div class="card achievements">
                <h2>üéØ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h2>
                <div class="achievement-item">
                    <div class="achievement-icon">ü•á</div>
                    <div class="achievement-info">
                        <h3>–¢–∞–ª–º–∏–¥</h3>
                        <p>7 –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥</p>
                    </div>
                    <div class="achievement-status" id="achievement1">üîí</div>
                </div>
                <div class="achievement-item">
                    <div class="achievement-icon">üî•</div>
                    <div class="achievement-info">
                        <h3>–ë–∞–∫–∫–∏</h3>
                        <p>14 –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥</p>
                    </div>
                    <div class="achievement-status" id="achievement2">üîí</div>
                </div>
                <div class="achievement-item">
                    <div class="achievement-icon">üéì</div>
                    <div class="achievement-info">
                        <h3>–õ–∞–º–¥–∞–Ω</h3>
                        <p>21 –¥–µ–Ω—å –ø–æ–¥—Ä—è–¥</p>
                    </div>
                    <div class="achievement-status" id="achievement3">üîí</div>
                </div>
                <div class="achievement-item">
                    <div class="achievement-icon">üë®‚Äçüè´</div>
                    <div class="achievement-info">
                        <h3>–†–∞–≤</h3>
                        <p>30 –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥</p>
                    </div>
                    <div class="achievement-status" id="achievement4">üîí</div>
                </div>
                <div class="achievement-item">
                    <div class="achievement-icon">‚≠ê</div>
                    <div class="achievement-info">
                        <h3>–ì–∞–æ–Ω</h3>
                        <p>50 –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥</p>
                    </div>
                    <div class="achievement-status" id="achievement5">üîí</div>
                </div>
            </div>

            <!-- –ó–Ω–∞—á–∫–∏ –∑–∞ –Ω–µ–¥–µ–ª–∏ -->
            <div class="card weekly-badges">
                <h2>üèÖ –ó–Ω–∞—á–∫–∏ –∑–∞ –Ω–µ–¥–µ–ª–∏</h2>
                <div class="weekly-badge-count">
                    <span id="weeklyBadgesCount">0</span> –Ω–µ–¥–µ–ª—å –∑–∞–≤–µ—Ä—à–µ–Ω–æ
                </div>
                <div id="weeklyBadgesContainer"></div>
            </div>

            <!-- –ü–æ–¥–µ–ª–∏—Ç—å—Å—è —É—Å–ø–µ—Ö–∞–º–∏ -->
            <div class="card share-progress">
                <h2>üì§ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è —É—Å–ø–µ—Ö–∞–º–∏</h2>
                <div class="share-buttons">
                    <button class="share-btn whatsapp" id="shareWhatsAppBtn">
                        <span class="share-icon">üí¨</span>
                        WhatsApp
                    </button>
                    <button class="share-btn telegram" id="shareTelegramBtn">
                        <span class="share-icon">‚úàÔ∏è</span>
                        Telegram
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="view" id="settingsView">
        <div class="container">
            <div class="card setting-item" data-setting="sound">
                <div class="setting-info">
                    <h3>üîä –ó–≤—É–∫</h3>
                    <p>–ó–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã</p>
                </div>
                <div class="toggle-switch active" id="soundToggle"></div>
            </div>
            <div class="card setting-item" data-setting="animations">
                <div class="setting-info">
                    <h3>‚ú® –ê–Ω–∏–º–∞—Ü–∏–∏</h3>
                    <p>–ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã</p>
                </div>
                <div class="toggle-switch active" id="animationsToggle"></div>
            </div>
            <div class="card setting-item" data-setting="darkMode">
                <div class="setting-info">
                    <h3>üåô –¢—ë–º–Ω–∞—è —Ç–µ–º–∞</h3>
                    <p>–†–µ–∂–∏–º –¥–ª—è –≤–µ—á–µ—Ä–∞</p>
                </div>
                <div class="toggle-switch" id="darkModeToggle"></div>
            </div>
            <div class="card setting-item" id="syncProgressBtn">
                <div class="setting-info">
                    <h3>‚òÅÔ∏è –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è</h3>
                    <p>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –≤ –æ–±–ª–∞–∫–æ</p>
                </div>
            </div>
            <div class="card setting-item" id="loadProgressBtn">
                <div class="setting-info">
                    <h3>üì• –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ –æ–±–ª–∞–∫–∞</h3>
                    <p>–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å</p>
                </div>
            </div>
            <div class="card setting-item" id="resetBtn">
                <div class="setting-info">
                    <h3>üóëÔ∏è –°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å</h3>
                    <p>–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</p>
                </div>
            </div>
        </div>
    </div>

    <div class="section-view" id="sectionView">
        <div class="section-header">
            <button class="btn" id="closeSectionBtn">‚Üê –ù–∞–∑–∞–¥</button>
            <h2 id="sectionTitle">–†–∞–∑–¥–µ–ª</h2>
            <button class="btn" id="speakBtn">üîä</button>
        </div>
        <div class="section-content" id="sectionContent"></div>
    </div>

    <nav class="bottom-nav">
        <div class="nav-item active" data-view="homeView">
            <div class="nav-icon">üè†</div>
            <div class="nav-label">–ì–ª–∞–≤–Ω–∞—è</div>
        </div>
        <div class="nav-item" data-view="profileView">
            <div class="nav-icon">üë§</div>
            <div class="nav-label">–ü—Ä–æ—Ñ–∏–ª—å</div>
        </div>
        <div class="nav-item" id="printBtn">
            <div class="nav-icon">üñ®Ô∏è</div>
            <div class="nav-label">–ü–µ—á–∞—Ç—å</div>
        </div>
        <div class="nav-item" data-view="settingsView">
            <div class="nav-icon">‚öôÔ∏è</div>
            <div class="nav-label">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
        </div>
    </nav>

    <!-- Auth Modal -->
    <div id="authModal" class="modal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeAuthModal()">&times;</span>
            <h2 id="modalTitle">–í—Ö–æ–¥</h2>
            <div id="modalError" class="modal-error"></div>

            <!-- Sign In Form -->
            <div id="signInForm">
                <input type="email" id="emailInput" placeholder="Email" class="modal-input">
                <input type="password" id="passwordInput" placeholder="–ü–∞—Ä–æ–ª—å" class="modal-input">
                <button onclick="handleEmailSignIn()" class="modal-btn primary">–í–æ–π—Ç–∏</button>
                <button onclick="handleGoogleSignIn()" class="modal-btn google">
                    <span>üîê</span> –í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google
                </button>
                <div class="modal-links">
                    <a href="#" onclick="showResetPassword(); return false;">–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?</a>
                    <a href="#" onclick="showSignUpForm(); return false;">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
                </div>
            </div>

            <!-- Sign Up Form -->
            <div id="signUpForm" style="display:none;">
                <input type="text" id="nameInput" placeholder="–ò–º—è" class="modal-input">
                <input type="email" id="signUpEmail" placeholder="Email" class="modal-input">
                <input type="password" id="signUpPassword" placeholder="–ü–∞—Ä–æ–ª—å (–º–∏–Ω. 6 —Å–∏–º–≤–æ–ª–æ–≤)" class="modal-input">
                <button onclick="handleEmailSignUp()" class="modal-btn primary">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
                <div class="modal-links">
                    <a href="#" onclick="showSignInForm(); return false;">–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? –í–æ–π—Ç–∏</a>
                </div>
            </div>

            <!-- Reset Password Form -->
            <div id="resetPasswordForm" style="display:none;">
                <input type="email" id="resetEmail" placeholder="Email" class="modal-input">
                <button onclick="handlePasswordReset()" class="modal-btn primary">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É</button>
                <div class="modal-links">
                    <a href="#" onclick="showSignInForm(); return false;">–ù–∞–∑–∞–¥ –∫–æ –≤—Ö–æ–¥—É</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-analytics-compat.js"></script>

    <!-- Firebase Config and Auth -->
    <script src="firebase-config.js"></script>
    <script src="auth-manager.js"></script>
    <script src="auth-ui.js"></script>

    <!-- Games -->
    <script src="games/quiz.js"></script>
    <script src="games/truefalse.js"></script>
    <script src="games/match.js"></script>
    <script src="games/reflection.js"></script>
    <script src="games/wheel.js"></script>

    <!-- Achievements Manager -->
    <script src="achievements-manager.js"></script>

    <!-- Main App -->
    <script src="app.js"></script>
</body>
</html>
