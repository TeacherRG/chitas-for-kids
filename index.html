<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#667eea">
    <title>◊ë◊¥◊î | –•–∏—Ç–∞—Å –¥–ª—è –¥–µ—Ç–µ–π</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header class="app-header">
        <div class="bh-corner">◊ë◊¥◊î</div>
        <div class="language-selector" id="languageSelector">
            <div class="current-lang" id="currentLangBtn">üåê</div>
            <div class="lang-dropdown" id="langDropdown">
                <div class="lang-option" data-lang="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π</div>
                <div class="lang-option" data-lang="en">üá¨üáß English</div>
                <div class="lang-option" data-lang="uk">üá∫üá¶ –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</div>
                <div class="lang-option" data-lang="de">üá©üá™ Deutsch</div>
                <div class="lang-option" data-lang="he">üáÆüá± ◊¢◊ë◊®◊ô◊™</div>
            </div>
        </div>
        <h1 data-i18n="app-title">üìñ –•–∏—Ç–∞—Å –¥–ª—è –¥–µ—Ç–µ–π</h1>
        <p data-i18n="app-subtitle">–ñ–∏—Ç—å –≤ –Ω–æ–≥—É —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º!</p>
    </header>

    <div class="view active" id="homeView">
        <div class="container">
            <div class="card date-card">
                <h2 id="hebrewDate" data-i18n="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</h2>
                <div class="dedication" id="dedication"></div>
            </div>

            <div id="mazelTovSection"></div>

            <div class="card progress-card">
                <div class="progress-stats">
                    <div class="progress-stat">
                        <div class="value" id="scoreValue">0</div>
                        <div class="label" data-i18n="points">üìä –ë–∞–ª–ª—ã</div>
                    </div>
                    <div class="progress-stat">
                        <div class="value" id="starsValue">0</div>
                        <div class="label" data-i18n="stars">‚≠ê –ó–≤—ë–∑–¥—ã</div>
                    </div>
                    <div class="progress-stat">
                        <div class="value" id="completedValue">0/6</div>
                        <div class="label" data-i18n="completed">‚úÖ –ü—Ä–æ–π–¥–µ–Ω–æ</div>
                    </div>
                </div>
                <div class="progress-bar-container">
                    <div class="progress-bar" id="progressBar" style="width: 0%">0%</div>
                </div>
            </div>

            <div class="tiles-grid" id="tilesGrid">
                <div class="loading" data-i18n="loading-data">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö</div>
            </div>

            <!-- Date Navigation moved to bottom -->
            <nav class="date-navigation-bottom">
                <button class="btn" id="prevDayBtn" data-i18n="prev">‚óÄ –ü—Ä–µ–¥</button>
                <button class="btn" id="todayBtn" data-i18n="today">üìÖ –°–µ–≥–æ–¥–Ω—è</button>
                <button class="btn" id="nextDayBtn" data-i18n="next">–°–ª–µ–¥ ‚ñ∂</button>
            </nav>
        </div>
    </div>

    <div class="view" id="profileView">
        <div class="container">
            <!-- Auth Container -->
            <div class="card auth-card">
                <div id="authContainer"></div>
            </div>

            <div class="card profile-header">
                <h2 data-i18n="my-profile">üë§ –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h2>
                <div class="profile-stats">
                    <div class="profile-stat">
                        <div class="value" id="totalScore">0</div>
                        <div class="label" data-i18n="total-points">üèÜ –í—Å–µ–≥–æ –±–∞–ª–ª–æ–≤</div>
                    </div>
                    <div class="profile-stat">
                        <div class="value" id="totalStars">0</div>
                        <div class="label" data-i18n="total-stars">‚≠ê –í—Å–µ–≥–æ –∑–≤—ë–∑–¥</div>
                    </div>
                    <div class="profile-stat">
                        <div class="value" id="totalDays">0</div>
                        <div class="label" data-i18n="days-streak">üìÖ –î–Ω–µ–π –ø–æ–¥—Ä—è–¥</div>
                    </div>
                </div>
            </div>

            <div class="card achievements">
                <h2 data-i18n="achievements">üéØ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h2>
                <div class="achievement-item">
                    <div class="achievement-icon">ü•á</div>
                    <div class="achievement-info">
                        <h3 data-i18n="first-week">–ü–µ—Ä–≤–∞—è –Ω–µ–¥–µ–ª—è</h3>
                        <p data-i18n="study-7-days">–ò–∑—É—á–∞–π 7 –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥</p>
                    </div>
                    <div class="achievement-status" id="achievement1">üîí</div>
                </div>
                <div class="achievement-item">
                    <div class="achievement-icon">üî•</div>
                    <div class="achievement-info">
                        <h3 data-i18n="on-fire">–í –æ–≥–Ω–µ</h3>
                        <p data-i18n="study-14-days">14 –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥</p>
                    </div>
                    <div class="achievement-status" id="achievement2">üîí</div>
                </div>
                <div class="achievement-item">
                    <div class="achievement-icon">‚≠ê</div>
                    <div class="achievement-info">
                        <h3 data-i18n="starry">–ó–≤—ë–∑–¥–Ω—ã–π</h3>
                        <p data-i18n="collect-30-stars">–°–æ–±–µ—Ä–∏ 30 –∑–≤—ë–∑–¥</p>
                    </div>
                    <div class="achievement-status" id="achievement3">üîí</div>
                </div>
                <div class="achievement-item">
                    <div class="achievement-icon">üèÜ</div>
                    <div class="achievement-info">
                        <h3 data-i18n="champion">–ß–µ–º–ø–∏–æ–Ω</h3>
                        <p data-i18n="earn-500-points">500 –±–∞–ª–ª–æ–≤</p>
                    </div>
                    <div class="achievement-status" id="achievement4">üîí</div>
                </div>
            </div>
        </div>
    </div>

    <div class="view" id="settingsView">
        <div class="container">
            <div class="card setting-item" data-setting="sound">
                <div class="setting-info">
                    <h3 data-i18n="sound">üîä –ó–≤—É–∫</h3>
                    <p data-i18n="sound-effects">–ó–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã</p>
                </div>
                <div class="toggle-switch active" id="soundToggle"></div>
            </div>
            <div class="card setting-item" data-setting="animations">
                <div class="setting-info">
                    <h3 data-i18n="animations">‚ú® –ê–Ω–∏–º–∞—Ü–∏–∏</h3>
                    <p data-i18n="smooth-transitions">–ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã</p>
                </div>
                <div class="toggle-switch active" id="animationsToggle"></div>
            </div>
            <div class="card setting-item" data-setting="darkMode">
                <div class="setting-info">
                    <h3 data-i18n="dark-mode">üåô –¢—ë–º–Ω–∞—è —Ç–µ–º–∞</h3>
                    <p data-i18n="evening-mode">–†–µ–∂–∏–º –¥–ª—è –≤–µ—á–µ—Ä–∞</p>
                </div>
                <div class="toggle-switch" id="darkModeToggle"></div>
            </div>
            <div class="card setting-item" id="resetBtn">
                <div class="setting-info">
                    <h3 data-i18n="reset-progress">üóëÔ∏è –°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å</h3>
                    <p data-i18n="start-over">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</p>
                </div>
            </div>
        </div>
    </div>

    <div class="section-view" id="sectionView">
        <div class="section-header">
            <button class="btn" id="closeSectionBtn" data-i18n="back">‚Üê –ù–∞–∑–∞–¥</button>
            <h2 id="sectionTitle">–†–∞–∑–¥–µ–ª</h2>
            <button class="btn" id="speakBtn">üîä</button>
        </div>
        <div class="section-content" id="sectionContent"></div>
    </div>

    <nav class="bottom-nav">
        <div class="nav-item active" data-view="homeView">
            <div class="nav-icon">üè†</div>
            <div class="nav-label" data-i18n="home">–ì–ª–∞–≤–Ω–∞—è</div>
        </div>
        <div class="nav-item" data-view="profileView">
            <div class="nav-icon">üë§</div>
            <div class="nav-label" data-i18n="profile">–ü—Ä–æ—Ñ–∏–ª—å</div>
        </div>
        <div class="nav-item" id="printBtn">
            <div class="nav-icon">üñ®Ô∏è</div>
            <div class="nav-label" data-i18n="print">–ü–µ—á–∞—Ç—å</div>
        </div>
        <div class="nav-item" data-view="settingsView">
            <div class="nav-icon">‚öôÔ∏è</div>
            <div class="nav-label" data-i18n="settings">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
        </div>
    </nav>

    <!-- Auth Modal -->
    <div id="authModal" class="modal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeAuthModal()">&times;</span>
            <h2 id="modalTitle">–í—Ö–æ–¥</h2>
            <div id="modalError" class="modal-error"></div>

            <!-- Sign In Form -->
            <div id="signInForm">
                <input type="email" id="emailInput" placeholder="Email" class="modal-input">
                <input type="password" id="passwordInput" placeholder="–ü–∞—Ä–æ–ª—å" class="modal-input">
                <button onclick="handleEmailSignIn()" class="modal-btn primary">–í–æ–π—Ç–∏</button>
                <button onclick="handleGoogleSignIn()" class="modal-btn google">
                    <span>üîê</span> –í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google
                </button>
                <div class="modal-links">
                    <a href="#" onclick="showResetPassword(); return false;">–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?</a>
                    <a href="#" onclick="showSignUpForm(); return false;">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
                </div>
            </div>

            <!-- Sign Up Form -->
            <div id="signUpForm" style="display:none;">
                <input type="text" id="nameInput" placeholder="–ò–º—è" class="modal-input">
                <input type="email" id="signUpEmail" placeholder="Email" class="modal-input">
                <input type="password" id="signUpPassword" placeholder="–ü–∞—Ä–æ–ª—å (–º–∏–Ω. 6 —Å–∏–º–≤–æ–ª–æ–≤)" class="modal-input">
                <button onclick="handleEmailSignUp()" class="modal-btn primary">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
                <div class="modal-links">
                    <a href="#" onclick="showSignInForm(); return false;">–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? –í–æ–π—Ç–∏</a>
                </div>
            </div>

            <!-- Reset Password Form -->
            <div id="resetPasswordForm" style="display:none;">
                <input type="email" id="resetEmail" placeholder="Email" class="modal-input">
                <button onclick="handlePasswordReset()" class="modal-btn primary">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É</button>
                <div class="modal-links">
                    <a href="#" onclick="showSignInForm(); return false;">–ù–∞–∑–∞–¥ –∫–æ –≤—Ö–æ–¥—É</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <!-- Firebase Config and Auth -->
    <script src="firebase-config.js"></script>
    <script src="auth-manager.js"></script>
    <script src="auth-ui.js"></script>

    <script src="i18n.js"></script>
    <script src="games/quiz.js"></script>
    <script src="games/truefalse.js"></script>
    <script src="games/match.js"></script>
    <script src="games/reflection.js"></script>
    <script src="games/wheel.js"></script>
    <script src="app.js"></script>
</body>
</html>
